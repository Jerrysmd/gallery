(()=>{var F=!0,N=!0,W=!1;var M=function(){let t=[],i=!1;function e(){i||(i=!0,window.requestAnimationFrame?window.requestAnimationFrame(h):setTimeout(h,66))}function h(){t.forEach(function(o){o()}),i=!1}return{add:function(o){t.length||window.addEventListener("resize",e),t.push(o)},disable:function(){window.removeEventListener("resize",e)},reEnable:function(){window.addEventListener("resize",e)}}}();function Z(t,i,e){let h="#"+t+" {  position: relative;}."+i+"-figure {  background-color: #D5D5D5;  overflow: hidden;  left: 0;  position: absolute;  top: 0;  margin: 0;}."+i+"-figure img {  left: 0;  position: absolute;  top: 0;  height: 100%;  width: 100%;  opacity: 0;  transition: "+(e/1e3).toString(10)+"s ease opacity;  -webkit-transition: "+(e/1e3).toString(10)+"s ease opacity;}."+i+"-figure img."+i+"-thumbnail {  -webkit-filter: blur(30px);  filter: blur(30px);  left: auto;  position: relative;  width: auto;}."+i+"-figure img."+i+"-loaded {  opacity: 1;}",o=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css",u.styleSheet?u.styleSheet.cssText=h:u.appendChild(document.createTextNode(h)),o.appendChild(u)}function j(t,i){for(let e in i)i.hasOwnProperty(e)&&(t[e]=i[e])}function J(t){let i=0;do isNaN(t.offsetTop)||(i+=t.offsetTop),t=t.offsetParent;while(t);return i}function m(t,i){return this.inRAF=!1,this.isTransitioning=!1,this.minAspectRatioRequiresTransition=!1,this.minAspectRatio=null,this.latestYOffset=0,this.lastWindowWidth=window.innerWidth,this.scrollDirection="down",this.visibleImages=[],this.settings={containerId:"pig",scroller:window,classPrefix:"pig",figureTagName:"figure",spaceBetweenImages:8,transitionSpeed:500,primaryImageBufferHeight:1e3,secondaryImageBufferHeight:300,thumbnailSize:20,urlForSize:function(e,h){return"/img/"+h.toString(10)+"/"+e},styleForElement:function(e){return""},onClickHandler:null,getMinAspectRatio:function(e){return e<=640?2:e<=1280?4:e<=1920?5:6},getImageSize:function(e){return e<=640?100:e<=1920?250:500}},j(this.settings,i||{}),this.container=document.getElementById(this.settings.containerId),this.container||console.error("Could not find element with ID "+this.settings.containerId),this.scroller=this.settings.scroller,this.images=this._parseImageData(t),Z(this.settings.containerId,this.settings.classPrefix,this.settings.transitionSpeed),this}m.prototype._getTransitionTimeout=function(){return this.settings.transitionSpeed*1.5};m.prototype._getTransitionString=function(){return this.isTransitioning?(this.settings.transitionSpeed/1e3).toString(10)+"s transform ease":"none"};m.prototype._recomputeMinAspectRatio=function(){let t=this.minAspectRatio;this.minAspectRatio=this.settings.getMinAspectRatio(this.lastWindowWidth),t!==null&&t!==this.minAspectRatio?this.minAspectRatioRequiresTransition=!0:this.minAspectRatioRequiresTransition=!1};m.prototype._parseImageData=function(t){let i=[];return t.forEach(function(e,h){let o=new T(e,h,this);i.push(o)}.bind(this)),i};m.prototype._computeLayout=function(){let t=parseInt(this.container.clientWidth,10),i=[],e=0,h=0,o=0;this._recomputeMinAspectRatio(),!this.isTransitioning&&this.minAspectRatioRequiresTransition&&(this.isTransitioning=!0,setTimeout(function(){this.isTransitioning=!1},this._getTransitionTimeout()));let u=this._getTransitionString();[].forEach.call(this.images,function(a,b){if(o+=parseFloat(a.aspectRatio),i.push(a),o>=this.minAspectRatio||b+1===this.images.length){o=Math.max(o,this.minAspectRatio);let s=(t-this.settings.spaceBetweenImages*(i.length-1))/o;i.forEach(function(l){let c=s*l.aspectRatio;l.style={width:parseInt(c,10),height:parseInt(s,10),translateX:e,translateY:h,transition:u},e+=c+this.settings.spaceBetweenImages}.bind(this)),i=[],o=0,h+=parseInt(s,10)+this.settings.spaceBetweenImages,e=0}}.bind(this)),this.totalHeight=h-this.settings.spaceBetweenImages};m.prototype._doLayout=function(){this.container.style.height=this.totalHeight+"px";let t=this.scrollDirection==="up"?this.settings.primaryImageBufferHeight:this.settings.secondaryImageBufferHeight,i=this.scrollDirection==="down"?this.settings.secondaryImageBufferHeight:this.settings.primaryImageBufferHeight,e=J(this.container),h=this.scroller===window?window.innerHeight:this.scroller.offsetHeight,o=this.latestYOffset-e-t,u=this.latestYOffset-e+h+i;this.images.forEach(function(a){a.style.translateY+a.style.height<o||a.style.translateY>u?a.hide():a.load()}.bind(this))};m.prototype._getOnScroll=function(){let t=this;return function(){let e=t.scroller===window?window.pageYOffset:t.scroller.scrollTop;t.previousYOffset=t.latestYOffset||e,t.latestYOffset=e,t.scrollDirection=t.latestYOffset>t.previousYOffset?"down":"up",t.inRAF||(t.inRAF=!0,window.requestAnimationFrame(function(){t._doLayout(),t.inRAF=!1}))}};m.prototype.enable=function(){this.onScroll=this._getOnScroll(),this.scroller.addEventListener("scroll",this.onScroll),this.onScroll(),this._computeLayout(),this._doLayout();let t=()=>this.scroller===window?window.innerWidth:this.scroller.offsetWidth;return M.add(function(){this.lastWindowWidth=t(),this._computeLayout(),this._doLayout();let i=t();i!==this.lastWindowWidth&&(this.lastWindowWidth=i,this._computeLayout(),this._doLayout())}.bind(this)),this};m.prototype.disable=function(){return this.scroller.removeEventListener("scroll",this.onScroll),M.disable(),this};function T(t,i,e){return this.existsOnPage=!1,this.aspectRatio=t.aspectRatio,this.filename=t.filename,this.index=i,this.pig=e,this.classNames={figure:e.settings.classPrefix+"-figure",thumbnail:e.settings.classPrefix+"-thumbnail",loaded:e.settings.classPrefix+"-loaded"},this}T.prototype.load=function(){this.existsOnPage=!0,this._updateStyles(),this.pig.container.appendChild(this.getElement()),setTimeout(function(){this.existsOnPage&&(this.thumbnail||(this.thumbnail=new Image,this.thumbnail.src=this.pig.settings.urlForSize(this.filename,this.pig.settings.thumbnailSize),this.thumbnail.className=this.classNames.thumbnail,this.thumbnail.onload=function(){this.thumbnail&&(this.thumbnail.className+=" "+this.classNames.loaded)}.bind(this),this.getElement().appendChild(this.thumbnail)),this.fullImage||(this.fullImage=new Image,this.fullImage.src=this.pig.settings.urlForSize(this.filename,this.pig.settings.getImageSize(this.pig.lastWindowWidth)),this.fullImage.onload=function(){this.fullImage&&(this.fullImage.className+=" "+this.classNames.loaded)}.bind(this),this.getElement().appendChild(this.fullImage)))}.bind(this),100)};T.prototype.hide=function(){this.getElement()&&(this.thumbnail&&(this.thumbnail.src="",this.getElement().removeChild(this.thumbnail),delete this.thumbnail),this.fullImage&&(this.fullImage.src="",this.getElement().removeChild(this.fullImage),delete this.fullImage)),this.existsOnPage&&this.pig.container.removeChild(this.getElement()),this.existsOnPage=!1};T.prototype.getElement=function(){if(!this.element){this.element=document.createElement(this.pig.settings.figureTagName),this.element.className=this.classNames.figure;let t=this.pig.settings.styleForElement(this.filename);this.style&&(this.element.style=t),this.pig.settings.onClickHandler!==null&&this.element.addEventListener("click",function(){this.pig.settings.onClickHandler(this.filename)}.bind(this),{passive:!0}),this.pig.settings.onHoverHandler!==null&&(this.element.addEventListener("mouseover",function(){this.pig.settings.onHoverHandler(this.filename)}.bind(this),{passive:!0}),this.element.addEventListener("touchstart",function(){this.pig.settings.onHoverHandler(this.filename)}.bind(this),{passive:!0})),this._updateStyles()}return this.element};T.prototype._updateStyles=function(){this.getElement().style.transition=this.style.transition,this.getElement().style.width=this.style.width+"px",this.getElement().style.height=this.style.height+"px",this.getElement().style.transform="translate3d("+this.style.translateX+"px,"+this.style.translateY+"px, 0)"};function P(t,i){let e=function(){},u=s=>Math.hypot(s[0].pageX-s[1].pageX,s[0].pageY-s[1].pageY);var a={touchstart:{x:-1,y:-1,x2:-1,y2:-1,d:-1},touchmove:{x:-1,y:-1,x2:-1,y2:-1,d:-1},multitouch:!1};a.direction=function(){if(this.touchmove.x==-1)return"";let s=this.touchmove.x-this.touchstart.x;if(Math.abs(s)<50){let l=this.touchmove.y-this.touchstart.y;return Math.abs(l)<50?"":l>0?"down":"up"}return s>0?"right":"left"},a.reset=function(){this.touchstart.x=-1,this.touchstart.y=-1,this.touchmove.x=-1,this.touchmove.y=-1,this.touchstart.d=-1,this.touchmove.d=-1,this.touchstart.x2=-1,this.touchstart.y2=-1,this.touchmove.x2=-1,this.touchmove.y2=-1,this.multitouch=!1},a.update=function(s,l){this.multitouch=this.multitouch||l.length>1,l.length>1&&(this[s.type].d=u(l),this[s.type].x2=l[1].pageX,this[s.type].y2=l[1].pageY),this[s.type].x=l[0].pageX,this[s.type].y=l[0].pageY};let b=function(s,l){let c=1;if(l.length===2){s.scale?c=s.scale:(c=a.touchmove.d/a.touchstart.d,c=Math.round(c*100)/100),c<1&&(c=1);let x=((a.touchmove.x+a.touchmove.x2)/2-(a.touchstart.x+a.touchstart.x2)/2)*2,d=((a.touchmove.y+a.touchmove.y2)/2-(a.touchstart.y+a.touchstart.y2)/2)*2;t.style.transform=`translate3d(${x}px, ${d}px, 0) scale(${c})`,t.style.zIndex=1e3}else t.style.transform="",t.style.zIndex=""};var p=function(s){if(e("event",s.type),typeof s<"u"&&typeof s.touches<"u"){let l=s.touches;switch(s.type){case"touchstart":a.reset(),a.update(s,l);break;case"touchmove":a.update(s,l),b(s,l);break;case"touchend":if(t.style.transform="",!a.multitouch){let c=a.direction();e("direction",c),c&&i(c)}break;default:break}}};t.addEventListener("touchstart",p,{passive:!0}),t.addEventListener("touchmove",p,{passive:!0}),t.addEventListener("touchend",p,{passive:!0})}var O=function(){},K={init:async function(){let t="gallerydeluxe",i="data-gd-image-data-url",e=document.getElementById(t);if(!e)throw new Error(`No element with id ${t} found.`);let h=e.getAttribute(i);if(!h)throw new Error(`No ${i} attribute found.`);let o,u,a=document.getElementById("gd-modal"),b=a.querySelector("#gd-modal-close"),p=function(n){n.preventDefault()},s=document.createElement("div");s.classList.add("gd-modal-content-wrapper"),a.insertBefore(s,a.firstChild);let l=n=>{n&&n.preventDefault(),s.removeEventListener("touchmove",p),s.removeEventListener("gesturestart",p),a.style.display="none",document.body.style.overflow="auto"};b.addEventListener("click",function(){l()});let c=function(n){switch(O("swipe",n),n){case"left":o=o.next,x();break;case"right":o=o.prev,x();break;default:l();break}};P(s,function(n){c(n)}),document.addEventListener("keydown",function(n){switch(n.key){case"ArrowLeft":c("right");break;case"ArrowRight":c("left");break;case"Escape":l(n);break}});let x=()=>{s.addEventListener("touchmove",p),s.addEventListener("gesturestart",p);let n="gd-modal-loaded",r="gd-modal-thumbnail";document.body.style.overflow="hidden";let g=a.querySelectorAll(".gd-modal-content"),y=!1,w=()=>{y||(y=!0,g.forEach(S=>{S.remove()}))};if(o){let S=document.getElementById("gd-modal");if(F){u&&clearTimeout(u);let v=S.querySelector("#gd-modal-exif"),C="gd-modal-exif-ontimeout",R=v.lastElementChild;for(;R;)v.removeChild(R),R=v.lastElementChild;let A=document.createElement("dl");v.appendChild(A);let D=(L,G)=>{let B=document.createElement("dt");B.innerText=Q(L),A.appendChild(B);let z=document.createElement("dd");z.innerText=G,A.appendChild(z)},k=new Date(o.exif.Date);var $=new Date(k.getTime()-k.getTimezoneOffset()*6e4).toISOString().split("T")[0];D("Date",$);let Y=o.exif.Tags;for(let L in Y)D(L,Y[L]);v.classList.remove(C),u=setTimeout(()=>{v.classList.add(C)},1200)}let f=new Image;f.classList.add("gd-modal-content"),f.width=o.width,f.height=o.height,f.style.aspectRatio=o.width/o.height;let I=f.cloneNode(!1);f.classList.add(r),I.src=o.full,f.src=o[20],f.onload=function(){f&&(s.appendChild(f),w())},I.onload=function(){I&&(s.appendChild(I),I.classList.add(n),f&&f.classList.add(n),w())},S.style.display="block"}setTimeout(function(){w()},1e3)},d=await(await fetch(h)).json();d.sort((n,r)=>{let g=new Date(n.exif.Date),y=new Date(r.exif.Date);return g-y}),W?d=d.map(n=>({value:n,sort:Math.random()})).sort((n,r)=>n.sort-r.sort).map(({value:n})=>n):N&&(d=d.reverse());let E=new Map,_=[];for(let n=0;n<d.length;n++){let r=d[n];r.prev=d[(n+d.length-1)%d.length],r.next=d[(n+1)%d.length],_.push({filename:r.name,aspectRatio:r.width/r.height,image:r}),E.set(r.name,r)}var X={onClickHandler:function(n){O("onClickHandler",n),o=E.get(n),o&&x()},onHoverHandler:function(n){if(O("onHoverHandler",n),o=E.get(n),o){let g=new Date(o.exif.Date);var r=new Date(g.getTime()-g.getTimezoneOffset()*6e4).toISOString().split("T")[0].split("-");document.getElementById("disp-year").innerHTML=r[0],document.getElementById("disp-month").innerHTML=r[1],document.getElementById("disp-day").innerHTML=r[2]}},containerId:t,classPrefix:"gd",spaceBetweenImages:1,urlForSize:function(n,r){return E.get(n)[r]},styleForElement:function(n){let r=E.get(n);if(!r||r.colors.size<1)return"";let g=r.colors,y=g[0],w="#ccc";return g.length>1&&(w=g[1]),` background: linear-gradient(15deg, ${y}, ${w});`}};new m(_,X).enable()}};function Q(t){return t.replace(/([A-Z])/g," $1").replace(/^./,function(i){return i.toUpperCase()})}var q=K;q.init();})();
/*! The Pig library is MIT License (MIT) Copyright (c) 2015 Dan Schlosser, see https://github.com/schlosser/pig.js/blob/master/LICENSE.md  */
